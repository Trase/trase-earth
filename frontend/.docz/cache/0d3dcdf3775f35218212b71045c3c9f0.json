{"remainingRequest":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js?{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\",[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],[\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/react-hot-loader/babel.js\"],\"env\":{\"production\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"transform-react-remove-prop-types\",\"lodash\"]},\"test\":{\"presets\":[[\"@babel/env\",{\"useBuiltIns\":\"entry\"}],\"@babel/preset-react\"],\"plugins\":[\"@babel/plugin-syntax-dynamic-import\",\"@babel/plugin-syntax-object-rest-spread\",\"@babel/plugin-transform-exponentiation-operator\",[\"@babel/plugin-proposal-class-properties\",{\"spec\":true}],\"@babel/plugin-transform-modules-commonjs\",\"@babel/plugin-transform-runtime\",[\"module-resolver\",{\"alias\":{\"scripts\":\"./scripts\",\"actions\":\"./scripts/actions\",\"utils\":\"./scripts/utils\",\"reducers\":\"./scripts/reducers\",\"store\":\"./scripts/store\",\"components\":\"./scripts/components\",\"containers\":\"./scripts/containers\",\"constants\":\"./scripts/constants\",\"router\":\"./scripts/router\",\"react-components\":\"./scripts/react-components\",\"named-maps\":\"./scripts/named-maps\"}}]]}},\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx","dependencies":[{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx","mtime":1551288394533},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/.babelrc","mtime":1553790719443},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1550511965648},{"path":"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/node_modules/babel-loader/lib/index.js","mtime":1547926395833}],"contextDependencies":[],"result":["(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { FixedSizeGrid } from 'react-window';\nimport debounce from 'lodash/debounce';\nimport ShrinkingSpinner from '../shrinking-spinner/shrinking-spinner.component';\nimport './grid-list.scss';\n\nvar GridList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(GridList, _React$Component);\n\n  function GridList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, GridList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(GridList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"listRef\", React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"debouncedGetMoreItemsCb\", debounce(_this.props.getMoreItems, 150));\n\n    _defineProperty(_assertThisInitialized(_this), \"getMoreItems\", function (_ref) {\n      var scrollTop = _ref.scrollTop,\n          scrollUpdateWasRequested = _ref.scrollUpdateWasRequested,\n          verticalScrollDirection = _ref.verticalScrollDirection;\n      var _this$props = _this.props,\n          items = _this$props.items,\n          height = _this$props.height,\n          rowHeight = _this$props.rowHeight,\n          page = _this$props.page,\n          columnCount = _this$props.columnCount;\n      var current = parseInt((scrollTop + height) / rowHeight, 10);\n      var buffer = 1;\n      var pageEnd = parseInt(items.length / columnCount, 10);\n      var reachedPageEnd = current === pageEnd;\n      var reachedPageEndWithBuffer = current === pageEnd - buffer && page > GridList.defaultProps.page; // TODO: add backwards support\n      // const reachedPageStart = current === columnCount;\n      // if (reachedPageStart && !scrollUpdateWasRequested && page > 0 && verticalScrollDirection === 'backward') {\n      //   getMoreItems(page - 1, 'backwards');\n      // }\n\n      if ((reachedPageEnd || reachedPageEndWithBuffer) && !scrollUpdateWasRequested && verticalScrollDirection === 'forward') {\n        _this.debouncedGetMoreItemsCb(page + 1, 'forward');\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(GridList, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props2 = this.props,\n          items = _this$props2.items,\n          columnCount = _this$props2.columnCount;\n\n      if (prevProps.items.length > 0 && items.length !== prevProps.items.length) {\n        var prevLastRow = prevProps.items[prevProps.items.length - 1];\n        var currentFirstRowIndex = items.findIndex(function (i) {\n          return i.id === (prevLastRow && prevLastRow.id);\n        });\n        var buffer = 1;\n        var rowIndex = Math.ceil(parseInt(currentFirstRowIndex / columnCount, 10)) - buffer;\n        this.listRef.current.scrollToItem({\n          rowIndex: rowIndex,\n          columnIndex: 0,\n          align: 'start'\n        });\n      }\n    }\n  }, {\n    key: \"getGroupedItems\",\n    value: function getGroupedItems() {\n      var _this$props3 = this.props,\n          groupBy = _this$props3.groupBy,\n          items = _this$props3.items,\n          columnCount = _this$props3.columnCount;\n      var grouped = [];\n      items.forEach(function (item) {\n        var index = grouped.length;\n\n        if (item[groupBy]) {\n          if (index % columnCount !== 0) {\n            grouped.push.apply(grouped, _toConsumableArray(Array(columnCount - index % columnCount).fill(null)));\n          }\n\n          grouped.push.apply(grouped, [item].concat(_toConsumableArray(Array(columnCount - 1).fill(null))));\n        } else {\n          grouped.push(item);\n        }\n      });\n      return grouped;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          className = _this$props4.className,\n          height = _this$props4.height,\n          width = _this$props4.width,\n          columnWidth = _this$props4.columnWidth,\n          rowHeight = _this$props4.rowHeight,\n          items = _this$props4.items,\n          columnCount = _this$props4.columnCount,\n          children = _this$props4.children,\n          groupBy = _this$props4.groupBy,\n          loading = _this$props4.loading,\n          loadingMoreItems = _this$props4.loadingMoreItems;\n      var groupedItems = groupBy && this.getGroupedItems();\n      var isLoading = loading || loadingMoreItems;\n      return React.createElement(\"div\", {\n        className: \"c-grid-list\"\n      }, React.createElement(FixedSizeGrid, {\n        ref: this.listRef,\n        className: className,\n        height: height,\n        width: width,\n        columnWidth: columnWidth,\n        rowHeight: rowHeight,\n        itemData: groupedItems || items,\n        rowCount: Math.ceil((groupedItems || items).length / columnCount),\n        columnCount: columnCount,\n        onScroll: this.getMoreItems\n      }, function (_ref2) {\n        var rowIndex = _ref2.rowIndex,\n            columnIndex = _ref2.columnIndex,\n            style = _ref2.style,\n            data = _ref2.data;\n        var item = data[rowIndex * columnCount + columnIndex];\n        if (typeof item === 'undefined' || !children) return null;\n        return children({\n          item: item,\n          style: style,\n          isGroup: item && !!item[groupBy]\n        });\n      }), isLoading && React.createElement(\"div\", {\n        className: \"grid-list-loading-container\"\n      }, React.createElement(ShrinkingSpinner, {\n        className: \"-small -dark grid-list-spinner\"\n      })));\n    }\n  }]);\n\n  return GridList;\n}(React.Component);\n\n_defineProperty(GridList, \"propTypes\", {\n  page: PropTypes.number,\n  loading: PropTypes.bool,\n  loadingMoreItems: PropTypes.bool,\n  groupBy: PropTypes.string,\n  className: PropTypes.string,\n  getMoreItems: PropTypes.func,\n  items: PropTypes.array.isRequired,\n  width: PropTypes.number.isRequired,\n  children: PropTypes.func.isRequired,\n  height: PropTypes.number.isRequired,\n  rowHeight: PropTypes.number.isRequired,\n  columnWidth: PropTypes.number.isRequired,\n  columnCount: PropTypes.number.isRequired\n});\n\n_defineProperty(GridList, \"defaultProps\", {\n  getMoreItems: function getMoreItems() {},\n  page: 1\n});\n\nvar _default = GridList;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_typeof, \"_typeof\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_toConsumableArray, \"_toConsumableArray\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_nonIterableSpread, \"_nonIterableSpread\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_iterableToArray, \"_iterableToArray\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_arrayWithoutHoles, \"_arrayWithoutHoles\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_classCallCheck, \"_classCallCheck\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_defineProperties, \"_defineProperties\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_createClass, \"_createClass\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_possibleConstructorReturn, \"_possibleConstructorReturn\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_getPrototypeOf, \"_getPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_assertThisInitialized, \"_assertThisInitialized\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_inherits, \"_inherits\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_setPrototypeOf, \"_setPrototypeOf\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_defineProperty, \"_defineProperty\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(GridList, \"GridList\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n  reactHotLoader.register(_default, \"default\", \"/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();",{"version":3,"sources":["/Users/rodrigo/WorkWorkWorkWorkWork/trase/frontend/scripts/react-components/shared/grid-list/grid-list.component.jsx"],"names":["GridList","React","Component","page","PropTypes","loading","loadingMoreItems","groupBy","className","getMoreItems","items","width","children","height","rowHeight","columnWidth","columnCount","isRequired","debounce","prevProps","prevLastRow","currentFirstRowIndex","i","buffer","rowIndex","Math","parseInt","columnIndex","align","scrollTop","scrollUpdateWasRequested","verticalScrollDirection","current","pageEnd","reachedPageEnd","reachedPageEndWithBuffer","grouped","index","item","Array","groupedItems","isLoading","style","data","isGroup"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FixedSizeGrid } from 'react-window';\nimport debounce from 'lodash/debounce';\nimport ShrinkingSpinner from '../shrinking-spinner/shrinking-spinner.component';\n\nimport './grid-list.scss';\n\nclass GridList extends React.Component {\n  static propTypes = {\n    page: PropTypes.number,\n    loading: PropTypes.bool,\n    loadingMoreItems: PropTypes.bool,\n    groupBy: PropTypes.string,\n    className: PropTypes.string,\n    getMoreItems: PropTypes.func,\n    items: PropTypes.array.isRequired,\n    width: PropTypes.number.isRequired,\n    children: PropTypes.func.isRequired,\n    height: PropTypes.number.isRequired,\n    rowHeight: PropTypes.number.isRequired,\n    columnWidth: PropTypes.number.isRequired,\n    columnCount: PropTypes.number.isRequired\n  };\n\n  static defaultProps = {\n    getMoreItems: () => {},\n    page: 1\n  };\n\n  listRef = React.createRef();\n\n  debouncedGetMoreItemsCb = debounce(this.props.getMoreItems, 150);\n\n  componentDidUpdate(prevProps) {\n    const { items, columnCount } = this.props;\n    if (prevProps.items.length > 0 && items.length !== prevProps.items.length) {\n      const prevLastRow = prevProps.items[prevProps.items.length - 1];\n      const currentFirstRowIndex = items.findIndex(i => i.id === (prevLastRow && prevLastRow.id));\n      const buffer = 1;\n      const rowIndex = Math.ceil(parseInt(currentFirstRowIndex / columnCount, 10)) - buffer;\n\n      this.listRef.current.scrollToItem({\n        rowIndex,\n        columnIndex: 0,\n        align: 'start'\n      });\n    }\n  }\n\n  getMoreItems = ({ scrollTop, scrollUpdateWasRequested, verticalScrollDirection }) => {\n    const { items, height, rowHeight, page, columnCount } = this.props;\n    const current = parseInt((scrollTop + height) / rowHeight, 10);\n    const buffer = 1;\n    const pageEnd = parseInt(items.length / columnCount, 10);\n    const reachedPageEnd = current === pageEnd;\n    const reachedPageEndWithBuffer =\n      current === pageEnd - buffer && page > GridList.defaultProps.page;\n\n    // TODO: add backwards support\n    // const reachedPageStart = current === columnCount;\n    // if (reachedPageStart && !scrollUpdateWasRequested && page > 0 && verticalScrollDirection === 'backward') {\n    //   getMoreItems(page - 1, 'backwards');\n    // }\n    if (\n      (reachedPageEnd || reachedPageEndWithBuffer) &&\n      !scrollUpdateWasRequested &&\n      verticalScrollDirection === 'forward'\n    ) {\n      this.debouncedGetMoreItemsCb(page + 1, 'forward');\n    }\n  };\n\n  getGroupedItems() {\n    const { groupBy, items, columnCount } = this.props;\n    const grouped = [];\n    items.forEach(item => {\n      const index = grouped.length;\n      if (item[groupBy]) {\n        if (index % columnCount !== 0) {\n          grouped.push(...Array(columnCount - (index % columnCount)).fill(null));\n        }\n        grouped.push(item, ...Array(columnCount - 1).fill(null));\n      } else {\n        grouped.push(item);\n      }\n    });\n    return grouped;\n  }\n\n  render() {\n    const {\n      className,\n      height,\n      width,\n      columnWidth,\n      rowHeight,\n      items,\n      columnCount,\n      children,\n      groupBy,\n      loading,\n      loadingMoreItems\n    } = this.props;\n    const groupedItems = groupBy && this.getGroupedItems();\n    const isLoading = loading || loadingMoreItems;\n\n    return (\n      <div className=\"c-grid-list\">\n        <FixedSizeGrid\n          ref={this.listRef}\n          className={className}\n          height={height}\n          width={width}\n          columnWidth={columnWidth}\n          rowHeight={rowHeight}\n          itemData={groupedItems || items}\n          rowCount={Math.ceil((groupedItems || items).length / columnCount)}\n          columnCount={columnCount}\n          onScroll={this.getMoreItems}\n        >\n          {({ rowIndex, columnIndex, style, data }) => {\n            const item = data[rowIndex * columnCount + columnIndex];\n            if (typeof item === 'undefined' || !children) return null;\n            return children({ item, style, isGroup: item && !!item[groupBy] });\n          }}\n        </FixedSizeGrid>\n        {isLoading && (\n          <div className=\"grid-list-loading-container\">\n            <ShrinkingSpinner className=\"-small -dark grid-list-spinner\" />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default GridList;\n"]}]}